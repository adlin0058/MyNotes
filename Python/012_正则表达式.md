# 正则表达式

### 匹配规则
| 表达式  | 匹配           |
| ------- | -------------- |
| `\w`    | 一个字母或数字 |
| `\d`    | 一个数字       |
| `\s`    | 一个空白符     |
| `.`     | 一个任意字符   |
| `*`     | 任意个字符     |
| `+`     | 至少一个字符   |
| `?`     | 零或一个字符   |
| `{n}`   | n个字符        |
| `{n,m}` | n到m的字符     |

### 例

- 解释`\d{3}\s+\d{3,8}`
    1. `\d{3}`表示匹配3个数字
    2. `\s+`表示匹配1个以上的空白符
    3. `\d{3,8}`表示匹配3到8个数字

- 如何匹配`'021-12345'`
    1. `-`需要使用转义字符`\-`
    2. 两段数字分别使用`\d{3}`和`\d{5}`匹配
    3. 所以匹配格式为`\d{3}\-\d{5}`

### 进阶

要做更精确地匹配，可以用`[]`表示范围

- `[0-9a-zA-Z\_\-]`可以匹配一个 数字、大小写字母、下划线(_)或连字符(-)
- `[0-9a-zA-Z\_\-]+`至少一个
- `[0-9a-zA-Z\_\-]*`任意个
- `[a-zA-Z\_][0-9a-zA-Z\_]`匹配由字母和下划线开头，后接任意个数字、字母下划线
- `[a-zA-Z\_][0-9a-zA-Z\_]{0,19}`更精确地限制了变量的长度

以显示为准👇

| 表达式 | 匹配       |
| ------ | ---------- |
| `A\|B` | A或B       |
| `^`    | 表示行开头 |
| `$`    | 表示行结束 |


### 在python中使用

**引用re模块**
```py
import re
```

推荐使用r前缀，不用考虑转义
```py
s = r'ABC\-001'
```


### 贪婪匹配
默认是贪婪匹配，匹配尽可能多的字符
```py
re.match(r'^(\d+)(0*)$','102300')
# 结果为
('102300','')
```
`\d+`使用贪婪匹配，直接把后面的0都匹配了
`0*`只能匹配空字符串了

```py
re.match(r'^(\d+?)(0*)$','102300')
#结果为
('1023','00')
```
加个`?`采用非贪婪匹配


### 关于编译

如果一个正则表达式要使用多次，可以预编译提高效率

```py
import re

#预编译
re_telephone = re.compile(r'^(\d{3})-(\d{3,8})$)

#使用
re_telephone.match('021-12345')
#结果
('021','12345')
#使用
re_telephone.match('021-8086')
#结果
('021','8086')
```