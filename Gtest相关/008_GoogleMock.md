# Google Mock

---
### 是什么
> GTest框架的一个附加组件
> 用于支持模拟（Mock）对象和行为的单元测试
> 通过使用模拟对象，可以模拟依赖项的行为
> 从而隔离被测试的代码更好地控制测试环境

**理解**
> 如果在测试某个函数时，需要上游函数（未完成，正在开发）的返回值
> 此时可使用 Mock（模拟器） 模拟出上个函数的返回值（或实现的效果）

---
### 主要功能
1. 模拟对象的创建
   > GMock 允许创建模拟对象，这些对象模拟了真实对象的行为。
   模拟对象可以用于测试依赖于其他对象的代码，而无需实际创建或访问这些对象。
2. 定义模拟对象的行为
   > 可以使用 GMock 定义模拟对象的行为，包括设置方法的预期调用和返回值。
   这使您能够模拟各种情况和交互，以测试代码的不同路径和边界条件。
3. 断言模拟对象的调用
   > GMock 允许断言模拟对象的方法是否按照预期进行了调用。
   这样可以验证代码是否正确地与模拟对象进行了交互。
4. 模拟对象的验证
   > 可以使用 GMock 验证模拟对象的方法是否按照预期进行了调用次数和顺序。
   这有助于确保代码与模拟对象的预期交互一致。

---
### Google Mock常用宏定义
1. MOCK_METHOD
   定义一个模拟方法，该方法可以接受任意数量和类型的参数，并返回任意类型的值
2. EXPECT_CALL
   设置一个期望，即模拟方法将以特定的参数被调用
3. ON_CALL
   设置一个默认操作，即当模拟方法以不同于期望的参数被调用时，应该执行什么操作
4. WillOnce
   设置一个操作，即模拟方法将在第一次调用时执行
5. WillRepeatedly
   设置一个操作，即模拟方法将在每次调用时执行
6. NiceMock
   定义一个“友好”的模拟对象，该对象可以接受任意数量和类型的参数，并返回默认值或任意值
7. StrictMock
   定义一个“严格”的模拟对象，该对象只接受特定的参数，并在参数不匹配时抛出异常
